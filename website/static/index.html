<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Algorithms on Regular Expression and Finite Automata</title>
    <link rel="stylesheet" type="text/css" href="./static/styles.css">
</head>
<body>
<h1>Algorithms on Regular Expression and Finite Automata</h1>

<p>
    This website was created to let students use the algorithms developed as part of my
    Master thesis to check their homework and to aid in preparing for their exams.
    Please be aware that for now all queries are executed on the server.
    Therefore, there are strict rate and runtime limits in place to
    protect my webspace and to ensure the user experience of other students.
</p>

<p>
    The code is licenced under a BSD3-license and available on
    <a target="_blank" href="https://github.com/koflerdavid/nfa-equivalence-code">its GitHub
        page</a>.
    Issue reports and pull requests are always welcome :)
</p>

<h2>Derivatives of Regular Expressions</h2>

<form id="frmWordDerivation" method="POST" action="/regex/derivation">
    <div class="form-row">
        <label for="txtWord">
            Word:
        </label>
        <input name="word" type="text" id="txtWord">
    </div>

    <div class="form-row">
        <label for="txtRegex">
            Regular expression:
        </label>
        <textarea name="regex" rows="5" id="txtRegex"></textarea>
    </div>

    <button type="submit">Derive!</button>

    <div class="form-row output-container" id="divDerivationOutput">
        <label for="wordDerivationOutput">Result:</label>
        <output id="wordDerivationOutput"></output>
    </div>
</form>

<h2>Converting Regular Expressions to DFAs</h2>

<form id="frmRegexToDfa" method="post" action="regex/dfa_conversion">
    <div class="form-row">
        <label for="txtInputRegex">Regex:</label>
        <textarea name="regex" rows="5" id="txtInputRegex"></textarea>
    </div>
    <button type="submit">Convert!</button>
    <div class="form-row output-container" id="divDfaOutput">
        <label for="dfaRepresentation">DFA:</label>
        <div id="dfaRepresentation"></div>
    </div>
</form>

<script type="application/javascript">
    function createPostRequest(url) {
        const request = new XMLHttpRequest();
        request.open('POST', url, true);
        request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        return request;
    }

    document.getElementById('frmWordDerivation').onsubmit = function (e) {
        const request = createPostRequest('regex/derivation');
        request.addEventListener('load', function () {
            if (request.status === 200) {
                document.getElementById('wordDerivationOutput').innerText = request.responseText;
                document.getElementById('divDerivationOutput').style = "visibility: visible;";
            } else {
                console.error("Regex derivation request error", request);
            }
        });

        request.addEventListener('error', function (e) {
            console.error("Error", request, e);
        });

        const word = document.getElementById('txtWord').value || '';
        const regex = document.getElementById('txtRegex').value || 'Îµ';
        request.send(encodeURI('word=' + word) + '&' + encodeURI('regex=' + regex));

        e.preventDefault();
    };

    document.getElementById('frmRegexToDfa').onsubmit = function (e) {
        const request = createPostRequest('regex/dfa_conversion');
        request.addEventListener('load', function () {
            if (request.status === 200) {
                document.getElementById('dfaRepresentation').innerHTML = request.responseText;
                document.getElementById('divDfaOutput').style = "visibility: visible;";
            } else {
                console.error("Regex conversion request error", request);
            }
        });

        request.addEventListener('error', function (e) {
            console.error("Error", request, e);
        });

        const regex = document.getElementById('txtInputRegex').value || '';
        request.send(encodeURI('regex=' + regex));

        e.preventDefault();
    };
</script>
</body>
</html>
